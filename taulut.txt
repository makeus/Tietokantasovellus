create table Käyttäjä (
 Käyttäjänimi text not null unique,
 Sähköposti text,
 Salasana text not null,
 Ylläpitäjä boolean not null,
 primary key (Käyttäjänimi)
);

create table Ryhmä (
 Id integer not null,
 Nimi text not null,
 primary key(Id)
);

create table Kategoria (
 Id  integer not null primary key,
 KategorianNimi text not null,
 Näkyvyys integer not null,
 foreign key (Näkyvyys) references Ryhmä (Id) on delete cascade
);

create table Viesti (
 Id  integer not null,
 Aika  Timestamp(0) not null,
 Otsikko text not null,
 Teksti  text not null,
 ViestinLukeneet text[],
 Vastaus  integer,
 Kirjoittaja text not null,
 Kategoria integer not null,
 primary key (Id),
 foreign key (Vastaus) references Viesti (Id) on delete cascade,
 foreign key (Kirjoittaja) references Käyttäjä (Käyttäjänimi) on delete cascade,
 foreign key (Kategoria) references Kategoria (Id) on delete cascade
);

create table Ryhmänjäsenet (
 RyhmänId integer not null,
 RyhmänJäsen text not null,
 primary key (RyhmänId,RyhmänJäsen),
 foreign key (RyhmänJäsen) references Käyttäjä (Käyttäjänimi) on delete cascade,
 foreign key (RyhmänId) references Ryhmä (Id) on delete cascade
);


